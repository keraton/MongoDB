## 06 aggregation

## 06.7 aggregate()



```javascript

// The first will be to convert the text strings to real dates

db.tickets.find().forEach(function(ticket){
  ticket.time = ISODate(ticket.time);
  db.tickets.save(ticket);
})


// $date_operators
db.tickets.aggregate({
    $project:{
        time:1,
        year:{$year:"$hora"},
        month:{$month:"$hora"},
        dayOfMonth: {$dayOfMonth:"$hora"},
        dayOfYear: {$dayOfYear:"$hora"},
        dayOfWeek: {$dayOfWeek:"$hora"},
        week:{$week:"$hora"},
        hour:{$hour:"$hora"}
    }
});

```
